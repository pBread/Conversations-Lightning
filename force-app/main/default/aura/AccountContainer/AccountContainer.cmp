<aura:component controller="TwilioConversationApi">
  <!-- Parent Attributes -->
  <aura:attribute
    access="public"
    default=""
    description="The Id of the Twilio_Credentials__c record for this account"
    name="twilioAccount"
    required="true"
    type="Object"
  />
  <aura:attribute
    access="public"
    description="Contact record"
    name="contact"
    required="true"
    type="Object"
  />

  <!-- Conversations -->
  <aura:attribute
    access="public"
    description="All conversations of this user in this account"
    name="conversations"
    type="Object[]"
  />
  <aura:attribute
    access="public"
    default="[]"
    description="All users of this user in this account"
    name="identities"
    type="Object[]"
  />

  <!-- Events -->
  <!-- <aura:registerEvent name="updateIdentities" type="c:Update_Identities" /> -->

  <!-- Handlers -->
  <aura:handler name="init" value="{!this}" action="{!c.initialize}" />
  <aura:handler
    action="{!c.handleUpdateIdentities}"
    name="updateIdentities"
    event="c:Update_Identities"
  />

  <!-- UI -->
  <lightning:button label="Tester" onclick="{!c.tester}" />
  <aura:iteration items="{!v.identities}" var="identity">
    <div>{!identity.name}</div>
  </aura:iteration>

  <aura:iteration items="{!v.conversations}" var="conversation">
    <c:ConversationContainer
      contact="{!v.contact}"
      conversation="{!conversation}"
      twilioAccount="{!v.twilioAccount}"
    />
  </aura:iteration>
</aura:component>
